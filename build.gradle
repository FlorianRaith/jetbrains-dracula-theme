plugins {
    id 'org.jetbrains.intellij' version '0.4.18'
}

group 'com.vermouthx'
version '1.8.0'

repositories {
    mavenCentral()
}

intellij {
    version '2020.1'
}

patchPluginXml {
    sinceBuild '193'
    untilBuild '202.*'

    def changelogPath = "${project.buildDir}/CHANGELOG.html"
    def readmePath = "${project.buildDir}/README.html"

    if (file(changelogPath).exists()) {
        changeNotes file(changelogPath).text
    }
    if (file(readmePath).exists()) {
        pluginDescription file(readmePath).text
    }
}

publishPlugin {
    username System.getProperty('jetbrains.username')
    token System.getProperty('jetbrains.token')
}
